{"version":3,"sources":["webpack:///./face-api.js-react/index.ts","webpack:///./src/const.ts","webpack:///./face-api.js-react/hoc/withAsyncRendering.tsx","webpack:///./src/styled/CenterContent.tsx","webpack:///./src/styled/StyledLink.tsx","webpack:///./src/components/SideMenu.tsx","webpack:///./src/layouts/PageLayout.tsx","webpack:///./src/Root.tsx","webpack:///./src/components/ImageSelection.tsx","webpack:///./src/components/SelectableImage.tsx","webpack:///./face-api.js-react/components/DisplayResults.tsx","webpack:///./src/styled/SideBySide.tsx","webpack:///./face-api.js-react/displayResults.tsx","webpack:///./face-api.js-react/shallowEquals.ts","webpack:///./face-api.js-react/facc/DetectFaceLandmarks.tsx","webpack:///./face-api.js-react/facc/DetectFaces.tsx","webpack:///./face-api.js-react/facc/LoadModels.tsx","webpack:///./face-api.js-react/hoc/index.ts","webpack:///./face-api.js-react/MediaElement.ts","webpack:///./face-api.js-react/components/ImageWithOverlay.tsx","webpack:///./face-api.js-react/components/index.ts","webpack:///./face-api.js-react/facc/ComputeFaceDescriptors.tsx","webpack:///./face-api.js-react/facc/index.ts","webpack:///./src/getPageContext.js","webpack:///util (ignored)","webpack:///util (ignored)?56b2","webpack:///buffer (ignored)","webpack:///crypto (ignored)","webpack:///./src/styled/MarginTop.tsx"],"names":["DOCS_URI","withPrefix","EXAMPLE_IMAGES","map","idx","label","url","EXAMPLE_IMAGES_FACE_EXPRESSIONS","expression","ALIGNED_FACE_IMAGES_BY_CLASS","clazz","EXAMPLE_VIDEO","MODELS_URI","ALIGNED_FACE_IMAGES","reduce","flat","arr","concat","FACE_DETECTORS","isTinyFaceDetector","detectorName","isSsdMobilenetv1","isMtcnn","getFaceDetectionModelUri","modelUri","tinyFaceDetectorModelUrl","ssdMobilenetv1ModelUrl","mtcnnModelUrl","Error","withAsyncRendering","asyncAction","initialState","props","state","injectedProps","isBusy","dispatchAsyncAction","bind","setState","componentWillReceiveProps","nextProps","shallowEquals","componentDidMount","render","renderBusyComponent","children","Object","assign","React","CenterContent","styled","div","alignItems","flexDirection","linkCss","css","StyledLink","Link","StyledAbsLink","a","styles","theme","paper","width","sideMenuWidth","SideMenuComponent","renderDrawer","isSm","menu","onToggle","paddingLeft","items","item","linkTo","isOpen","keepMounted","classes","SideMenu","withStyles","PageHeader","h3","MENU_ITEMS","pageContent","position","top","left","right","maxWidth","padding","marginLeft","breakpoints","up","PageLayoutComponent","isSideMenuOpen","toggleMenu","zIndex","PageLayout","getPageContext","require","default","Root","context","pageContext","sheetsManager","ImageSelection","selectedImage","onChange","e","target","value","Container","Margin","SelectionTypes","SelectableImage","imageSrc","initialImageSrc","onChangeSelection","onLoadFromDisk","file","files","reader","FileReader","onload","loadEvent","result","readAsDataURL","selectionType","imageStyle","SELECT","BOTH","FILE","imgId","display","defaultProps","DisplayResults","displayResults","input","overlay","results","displayResultsOptions","withScore","drawLines","SideBySide","options","getContext","clearRect","height","element","getBoundingClientRect","withBoxes","length","resizedResults","res","BoxWithText","resizeResults","detections","filter","ObjectDetection","detection","drawDetectionsOptions","textColor","fontSize","faceLandmarks","FaceLandmarks68","landmarks","faceExpressions","expressions","box","drawLandmarksOptions","color","lineWidth","faceapi","obj1","obj2","excludeKeys","excludeKeysSet","Set","keysSet","keys","key","has","Array","from","values","detectFaceLandmarks","faceLandmark68Net","detectLandmarks","DetectFaceLandmarks","detectFaces","detectionOptions","faceDetections","DetectFaces","loadModels","faceLandmarkModelUrl","faceRecognitionModelUrl","faceExpessionModelUrl","load","net","isLoaded","Promise","all","tinyFaceDetector","ssdMobilenetv1","mtcnn","faceRecognitionNet","faceExpressionNet","LoadModels","MediaElement","_element","ImageWithOverlay","onImageLoaded","onImageRef","onCanvasRef","img","onLoaded","el","shouldComponentUpdate","componentDidUpdate","containerStyle","canvasStyle","computeFaceDescriptors","inputs","every","computeFaceDescriptor","faceDescriptors","ComputeFaceDescriptors","createMuiTheme","palette","primary","light","cyan","main","dark","createPageContext","Map","sheetsRegistry","SheetsRegistry","generateClassName","createGenerateClassName","process","browser","global","__INIT_MATERIAL_UI__","MarginTop"],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEO,IAAMA,QAAQ,GAAGC,8DAAU,CAAC,oBAAD,CAA3B;AAEA,IAAMC,cAAc,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAC3BC,GAD2B,CACvB,UAAAC,GAAG;AAAA,iBAAUA,GAAV;AAAA,CADoB,EAE3BD,GAF2B,CAEvB,UAAAE,KAAK;AAAA,SAAK;AACbA,SAAK,EAALA,KADa;AAEbC,OAAG,EAAEL,8DAAU,cAAYI,KAAZ;AAFF,GAAL;AAAA,CAFkB,CAAvB;AAOA,IAAME,+BAA+B,GAAG,CAC7C,OAD6C,EAE7C,KAF6C,EAG7C,OAH6C,EAI7C,WAJ6C,EAK7C,WAL6C,EAM7C,SAN6C,EAO7C,SAP6C,EAS5CJ,GAT4C,CASxC,UAAAK,UAAU;AAAA,SAAOA,UAAP;AAAA,CAT8B,EAU5CL,GAV4C,CAUxC,UAAAE,KAAK;AAAA,SAAK;AACbA,SAAK,EAALA,KADa;AAEbC,OAAG,EAAEL,8DAAU,cAAYI,KAAZ;AAFF,GAAL;AAAA,CAVmC,CAAxC;AAeA,IAAMI,4BAA4B,GAAG,CAAC,KAAD,EAAQ,YAAR,EAAsB,QAAtB,EAAgC,SAAhC,EAA2C,OAA3C,EAAoD,KAApD,EAA2D,SAA3D,EAAsE,QAAtE,EACzCN,GADyC,CAExC,UAAAO,KAAK;AAAA,SAAI,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EACNP,GADM,CACF,UAAAC,GAAG;AAAA,gBAAOM,KAAP,GAAeN,GAAf;AAAA,GADD,EAEND,GAFM,CAEF,UAAAE,KAAK;AAAA,WAAK;AACbA,WAAK,EAALA,KADa;AAEbC,SAAG,EAAEL,8DAAU,cAAYS,KAAZ,SAAqBL,KAArB;AAFF,KAAL;AAAA,GAFH,CAAJ;AAAA,CAFmC,CAArC;AAUA,IAAMM,aAAa,GAAGV,8DAAU,kBAAhC;AAEA,IAAMW,UAAU,GAAGX,8DAAU,WAA7B;AAEA,IAAMY,mBAAmB,GAAGJ,4BAA4B,CAC5DK,MADgC,CACzB,UAACC,IAAD,EAAOC,GAAP;AAAA,SAAeD,IAAI,CAACE,MAAL,CAAYD,GAAZ,CAAf;AAAA,CADyB,EACQ,EADR,CAA5B;AAGA,IAAME,cAAc,GAAG,CAAC,oBAAD,EAAuB,kBAAvB,EAA2C,OAA3C,CAAvB;AAEA,SAASC,kBAAT,CAA4BC,YAA5B,EAAkD;AACvD,SAAOA,YAAY,KAAKF,cAAc,CAAC,CAAD,CAAtC;AACD;AAEM,SAASG,gBAAT,CAA0BD,YAA1B,EAAgD;AACrD,SAAOA,YAAY,KAAKF,cAAc,CAAC,CAAD,CAAtC;AACD;AAEM,SAASI,OAAT,CAAiBF,YAAjB,EAAuC;AAC5C,SAAOA,YAAY,KAAKF,cAAc,CAAC,CAAD,CAAtC;AACD;AAEM,SAASK,wBAAT,CAAkCH,YAAlC,EAAwDI,QAAxD,EAA0E;AAC/E,MAAIL,kBAAkB,CAACC,YAAD,CAAtB,EAAsC;AACpC,WAAO;AAAEK,8BAAwB,EAAED;AAA5B,KAAP;AACD;;AACD,MAAIH,gBAAgB,CAACD,YAAD,CAApB,EAAoC;AAClC,WAAO;AAAEM,4BAAsB,EAAEF;AAA1B,KAAP;AACD;;AACD,MAAIF,OAAO,CAACF,YAAD,CAAX,EAA2B;AACzB,WAAO;AAAEO,mBAAa,EAAEH;AAAjB,KAAP;AACD;;AAED,QAAM,IAAII,KAAJ,gEAAuER,YAAvE,CAAN;AACD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrED;AAEA;AAgBO,IAAMS,kBAAkB,GAAG,SAArBA,kBAAqB,CAChCC,WADgC,EAEhCC,YAFgC,EAG7B;AAAA;;AAIH;AAAA;AAAA;AAAA;;AAGE,mBAAYC,KAAZ,EAA2C;AAAA;;AACzC,0CAAMA,KAAN;AADyC,YAK3CC,KAL2C,GAKK;AAC9CC,qBAAa,EAAEH,YAD+B;AAE9CI,cAAM,EAAE;AAFsC,OALL;AAEzC,YAAKC,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBC,IAAzB,4FAA3B;AAFyC;AAG1C;;AANH;;AAAA,WAaQD,mBAbR;AAAA;AAAA;AAAA;AAAA;AAAA,6EAaE,iBAA0BJ,KAA1B;AAAA;AAAA;AAAA;AAAA;AACE,qBAAKM,QAAL,CAAc;AAAEH,wBAAM,EAAE;AAAV,iBAAd;AADF,8BAEE,IAFF;AAAA;AAAA,uBAEsDL,WAAW,CAACE,KAAD,CAFjE;;AAAA;AAAA;AAAA;AAEkBG,wBAFlB,EAE0B,KAF1B;AAEiCD,+BAFjC;AAAA;;AAAA,4BAEOI,QAFP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAbF;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA,WAkBEC,yBAlBF,GAkBE,mCAA0BC,SAA1B,EAA6D;AAC3D,UAAI,CAACC,4EAAa,CAAC,KAAKT,KAAN,EAAaQ,SAAb,EAAwB,CAAC,UAAD,CAAxB,CAAlB,EAAyD;AACvD,aAAKJ,mBAAL,CAAyBI,SAAzB;AACD;AACF,KAtBH;;AAAA,WAwBEE,iBAxBF,GAwBE,6BAAoB;AAClB,WAAKN,mBAAL,CAAyB,KAAKJ,KAA9B;AACD,KA1BH;;AAAA,WA4BEW,MA5BF,GA4BE,kBAAS;AAAA,wBAC2B,KAAKV,KADhC;AAAA,UACCC,aADD,eACCA,aADD;AAAA,UACgBC,MADhB,eACgBA,MADhB;AAAA,UAECS,mBAFD,GAEyB,KAAKZ,KAF9B,CAECY,mBAFD;;AAIP,UAAIT,MAAJ,EAAY;AACV,eAAOS,mBAAmB,GAAGA,mBAAmB,EAAtB,GAA2B,IAArD;AACD;;AAED,aAAOV,aAAa,GAChB,KAAKF,KAAL,CAAWa,QAAX,CAAoBC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBb,aAAlB,EAAiC;AAAEC,cAAM,EAANA;AAAF,OAAjC,CAApB,CADgB,CAElB;AAFkB,QAGhB,IAHJ;AAID,KAxCH;;AAAA;AAAA,IAAqBa,+CAArB;AA0CD,CAjDM,C;;;;;;;;AClBP;AAAA;AAAA;AAOO,IAAMC,aAAa,GAAGC,iEAAM,CAACC,GAAV;AAAA;AAAA;AAAA,iGAET,UAACnB,KAAD;AAAA,SAA+BA,KAAK,CAACoB,UAAN,IAAoB,QAAnD;AAAA,CAFS,EAIN,UAACpB,KAAD;AAAA,SAA+BA,KAAK,CAACqB,aAAN,IAAuB,KAAtD;AAAA,CAJM,CAAnB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPP;AACA;AAEA,IAAMC,OAAO,GAAGC,oDAAH,mEAAb;AAOO,IAAMC,UAAU,GAAGN,wDAAM,CAACO,qBAAD,CAAT;AAAA;AAAA;AAAA,aACnBH,OADmB,CAAhB;AAIA,IAAMI,aAAa,GAAGR,gDAAM,CAACS,CAAV;AAAA;AAAA;AAAA,aACtBL,OADsB,CAAnB,C;;;ACdP;AACA;AACA;AACA;AAEA;AACA;;AAcA,IAAMM,eAAM,GAAG,SAATA,MAAS,CAACC,KAAD;AAAA,SAAiB;AAC9BC,SAAK,EAAE;AACLC,WAAK,EAAEF,KAAK,CAACG;AADR;AADuB,GAAjB;AAAA,CAAf;;IAMMC,0B;;;;;;;;;;;SACJC,Y,GAAA,sBAAaC,IAAb,EAA4B;AAC1B,QAAMC,IAAI,GACR,oCAEID,IAAI,IACF,uBAAC,8BAAD;AACE,oBAAW,aADb;AAEE,aAAO,EAAE,KAAKnC,KAAL,CAAWqC;AAFtB,OAIE,uBAAC,cAAD,OAJF,CAHN,EAUE,uBAAC,aAAD;AAAe,UAAI,EAAC;AAApB,OACE;AAAI,WAAK,EAAE;AAAEC,mBAAW,EAAE;AAAf;AAAX,uBADF,CAVF,EAaE,uBAAC,2BAAD,OAbF,EAcE,uBAAC,aAAD;AAAe,UAAI,EAAEtE,6BAAQA;AAA7B,OACE;AAAI,WAAK,EAAE;AAAEsE,mBAAW,EAAE;AAAf;AAAX,6BADF,CAdF,EAiBE,uBAAC,2BAAD,OAjBF,EAkBE,uBAAC,wBAAD,QAEI,KAAKtC,KAAL,CAAWuC,KAAX,CAAiBpE,GAAjB,CACE,UAAAqE,IAAI;AAAA,aACF,uBAAC,4BAAD;AAAU,WAAG,EAAEA,IAAI,CAACC;AAApB,SACE,uBAAC,UAAD;AAAY,UAAE,EAAED,IAAI,CAACC;AAArB,SACID,IAAI,CAACnE,KADT,CADF,CADE;AAAA,KADN,CAFJ,CAlBF,CADF;AAkCA,WACE,uBAAC,0BAAD;AACE,YAAM,EAAC,MADT;AAEE,aAAO,EAAE8D,IAAI,GAAG,WAAH,GAAiB,WAFhC;AAGE,UAAI,EAAE,KAAKnC,KAAL,CAAW0C,MAHnB;AAIE,aAAO,EAAEP,IAAI,GAAG,KAAKnC,KAAL,CAAWqC,QAAd,GAAyB,YAAM,CAAE,CAJhD;AAKE,gBAAU,EAAE;AACVM,mBAAW,EAAE;AADH,OALd;AAQE,aAAO,EAAE;AACPb,aAAK,EAAE,KAAK9B,KAAL,CAAW4C,OAAX,CAAmBd;AADnB;AARX,OAYIM,IAZJ,CADF;AAgBD,G;;SAEDzB,M,GAAA,kBAAS;AACP,WACE,oCACE,uBAAC,0BAAD;AAAQ,UAAI;AAAZ,OACI,KAAKuB,YAAL,CAAkB,IAAlB,CADJ,CADF,EAIE,uBAAC,0BAAD;AAAQ,YAAM;AAAd,OACI,KAAKA,YAAL,CAAkB,KAAlB,CADJ,CAJF,CADF;AAUD,G;;;EAjE6BlB,kB;;AAoEzB,IAAM6B,QAAQ,GAAGC,4BAAU,CAAClB,eAAD,CAAV,CAAmBK,0BAAnB,CAAjB,C;;;AC9FP;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA,IAAMc,UAAU,GAAG7B,gDAAM,CAAC8B,EAAV;AAAA;AAAA;AAAA,0BAAhB;AAIA,IAAMC,UAAU,GAAG,CACjB;AAAE5E,OAAK,EAAE,6BAAT;AAAwCoE,QAAM,EAAE;AAAhD,CADiB,EAEjB;AAAEpE,OAAK,EAAE,6BAAT;AAAwCoE,QAAM,EAAE;AAAhD,CAFiB,EAGjB;AAAEpE,OAAK,EAAE,kBAAT;AAA6BoE,QAAM,EAAE;AAArC,CAHiB,EAIjB;AAAEpE,OAAK,EAAE,qBAAT;AAAgCoE,QAAM,EAAE;AAAxC,CAJiB,EAKjB;AAAEpE,OAAK,EAAE,sBAAT;AAAiCoE,QAAM,EAAE;AAAzC,CALiB,EAMjB;AAAEpE,OAAK,EAAE,oCAAT;AAA+CoE,QAAM,EAAE;AAAvD,CANiB,EAOjB;AAAEpE,OAAK,EAAE,6BAAT;AAAwCoE,QAAM,EAAE;AAAhD,CAPiB,EAQjB;AAAEpE,OAAK,EAAE,qBAAT;AAAgCoE,QAAM,EAAE;AAAxC,CARiB,EASjB;AAAEpE,OAAK,EAAE,sBAAT;AAAiCoE,QAAM,EAAE;AAAzC,CATiB,CAAnB;;AAYA,IAAMb,iBAAM,GAAG,SAATA,MAAS,CAACC,KAAD;AAAA;;AAAA,SAAiB;AAC9BqB,eAAW;AACTC,cAAQ,EAAE,UADD;AAETC,SAAG,EAAE,CAFI;AAGTC,UAAI,EAAE,CAHG;AAITC,WAAK,EAAE,CAJE;AAKTC,cAAQ,EAAE,OALD;AAMTC,aAAO,EAAE,MANA;AAOTC,gBAAU,EAAE;AAPH,oBAQR5B,KAAK,CAAC6B,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CARQ,IAQqB;AAC5BF,gBAAU,EAAE5B,KAAK,CAACG;AADU,KARrB;AADmB,GAAjB;AAAA,CAAf;;IAuBM4B,8B;;;;;;;;;;;;;UACJ3D,K,GAAyB;AACvB4D,oBAAc,EAAE;AADO,K;;UAIzBC,U,GAAa,YAAM;AACjB,YAAKxD,QAAL,CAAc,UAAAL,KAAK;AAAA,eAAK;AAAE4D,wBAAc,EAAE,CAAC5D,KAAK,CAAC4D;AAAzB,SAAL;AAAA,OAAnB;AACD,K;;;;;;;SAEMlD,M,GAAP,kBAAgB;AACd,WACE,oCACE,uBAAC,8BAAD;AACE,oBAAW,aADb;AAEE,aAAO,EAAE,KAAKmD,UAFhB;AAGE,WAAK,EAAE;AAAEC,cAAM,EAAE;AAAV;AAHT,OAKE,uBAAC,cAAD,OALF,CADF,EAQE,uBAAC,QAAD;AACE,WAAK,EAAEd,UADT;AAEE,YAAM,EAAE,KAAKhD,KAAL,CAAW4D,cAFrB;AAGE,cAAQ,EAAE,KAAKC;AAHjB,MARF,EAaE;AAAK,eAAS,EAAE,KAAK9D,KAAL,CAAW4C,OAAX,CAAmBM;AAAnC,OACE,uBAAC,sCAAD,QACE,oCACE,uBAAC,UAAD,iCADF,EAII,KAAKlD,KAAL,CAAWa,QAJf,CADF,CADF,CAbF,CADF;AA0BD,G;;;EApC+BG,kB;;AAwC3B,IAAMgD,UAAU,GAAGlB,4BAAU,CAAClB,iBAAD,CAAV,CAA0BgC,8BAA1B,CAAnB,C;;;;ACxFP;AACA;AAEA;;AAEA,IAAMK,cAAc,GAAGC,mBAAO,CAAC,GAAD,CAAP,CAA4BC,OAAnD;;AAEO,IAAMC,SAAb;AAAA;AAAA;AAAA;;AAIE,gBAAYpE,KAAZ,EAAwBqE,OAAxB,EAAqC;AAAA;;AACnC,wCAAMrE,KAAN,EAAaqE,OAAb;AADmC,UAFrCC,WAEqC,GAFlB,EAEkB;AAEnC,UAAKA,WAAL,GAAmBL,cAAc,EAAjC;AAFmC;AAGpC;;AAPH;;AAAA,SASStD,MATT,GASE,kBAAgB;AACd,WACE,uBAAC,0BAAD;AACE,WAAK,EAAE,KAAK2D,WAAL,CAAiBzC,KAD1B;AAEE,mBAAa,EAAE,KAAKyC,WAAL,CAAiBC;AAFlC,OAIE,uBAAC,UAAD,QACI,KAAKvE,KAAL,CAAWa,QADf,CAJF,CADF;AAUD,GApBH;;AAAA;AAAA,EAA0BG,kBAA1B,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPA;AACA;AAaO,IAAMwD,6BAAc,GAAG,SAAjBA,cAAiB;AAAA,MAAGjC,KAAH,QAAGA,KAAH;AAAA,MAAUkC,aAAV,QAAUA,aAAV;AAAA,MAAyBC,SAAzB,QAAyBA,QAAzB;AAAA,SAC5B,uBAAC,+BAAD,QACE,uBAAC,0BAAD;AACE,SAAK,EAAED,aADT;AAEE,YAAQ,EAAE,kBAAAE,CAAC;AAAA,aAAID,SAAQ,CAACC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAZ;AAAA,KAFb;AAGE,SAAK,EAAE,uBAAC,yBAAD;AAHT,KAMItC,KAAK,CAACpE,GAAN,CAAU,UAAAqE,IAAI;AAAA,WACZ,uBAAC,4BAAD;AACE,SAAG,EAAEA,IAAI,CAAClE,GADZ;AAEE,WAAK,EAAEkE,IAAI,CAAClE;AAFd,OAIIkE,IAAI,CAACnE,KAJT,CADY;AAAA,GAAd,CANJ,CADF,EAiBE,uBAAC,kCAAD,wBAjBF,CAD4B;AAAA,CAAvB,C;;;;;;;ACdP;AAEA;AACA;AAEA;AACA;AACA;AAEA,IAAMyG,SAAS,GAAG5D,gDAAM,CAACC,GAAV;AAAA;AAAA;AAAA,2EAAf;AAOA,IAAM4D,MAAM,GAAG7D,gDAAM,CAACC,GAAV;AAAA;AAAA;AAAA,oBAAZ;AAKO,IAAK6D,cAAZ;;WAAYA,c;AAAAA,gB;AAAAA,gB;AAAAA,gB;GAAAA,c,KAAAA,c;;AAmBL,IAAMC,+BAAb;AAAA;AAAA;AAAA;;AAKE,2BAAYjF,KAAZ,EAAyC;AAAA;;AACvC,wCAAMA,KAAN;AAEA,UAAKC,KAAL,GAAa;AACXiF,cAAQ,EAAElF,KAAK,CAACmF;AADL,KAAb;AAIA,UAAKC,iBAAL,GAAyB,MAAKA,iBAAL,CAAuB/E,IAAvB,wCAAzB;AACA,UAAKgF,cAAL,GAAsB,MAAKA,cAAL,CAAoBhF,IAApB,wCAAtB;AARuC;AASxC;;AAdH;;AAAA,SAgBE+E,iBAhBF,GAgBE,2BAAkBF,QAAlB,EAAoC;AAClC,SAAK5E,QAAL,CAAc;AACZ4E,cAAQ,EAARA;AADY,KAAd;AAGD,GApBH;;AAAA,SAsBEG,cAtBF,GAsBE,wBAAeV,CAAf,EAAuB;AAAA;;AACrB,QAAMW,IAAI,GAAG,CAACX,CAAC,CAACC,MAAF,CAASW,KAAT,IAAkB,EAAnB,EAAuB,CAAvB,CAAb;;AACA,QAAI,CAACD,IAAL,EAAW;AACT;AACD;;AAED,QAAME,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AAEAD,UAAM,CAACE,MAAP,GAAgB,UAACC,SAAD;AAAA,aAChB,MAAI,CAACrF,QAAL,CAAc;AACZ4E,gBAAQ,EAAES,SAAS,CAACf,MAAV,CAAiBgB;AADf,OAAd,CADgB;AAAA,KAAhB;;AAKAJ,UAAM,CAACK,aAAP,CAAqBlB,CAAC,CAACC,MAAF,CAASW,KAAT,CAAe,CAAf,CAArB;AACD,GApCH;;AAAA,SAsCE5E,MAtCF,GAsCE,kBAAS;AAAA,QACCmF,aADD,GACmB,KAAK9F,KADxB,CACC8F,aADD;AAEP,WACE,uBAAC,SAAD,QACE,uBAAC,qCAAD,oBACM,KAAK9F,KADX;AAEE,cAAQ,EAAE,KAAKC,KAAL,CAAWiF,QAFvB;AAGE,gBAAU,EAAE,KAAKlF,KAAL,CAAW+F;AAHzB,OADF,EAME,uBAAC,gCAAD,QAEE,CAACD,aAAa,KAAKd,cAAc,CAACgB,MAAjC,IAA2CF,aAAa,KAAKd,cAAc,CAACiB,IAA7E,KAEE,uBAAC,MAAD,QACE,uBAAC,6BAAD;AACE,WAAK,EAAE,KAAKjG,KAAL,CAAWuC,KADpB;AAEE,mBAAa,EAAE,KAAKtC,KAAL,CAAWiF,QAF5B;AAGE,cAAQ,EAAE,KAAKE;AAHjB,MADF,CAJJ,EAaE,CAACU,aAAa,KAAKd,cAAc,CAACkB,IAAjC,IAAyCJ,aAAa,KAAKd,cAAc,CAACiB,IAA3E,KAEE,uBAAC,MAAD,QACE;AACE,YAAM,EAAC,SADT;AAEE,QAAE,EAAE,KAAKjG,KAAL,CAAWmG,KAFjB;AAGE,cAAQ,MAHV;AAIE,WAAK,EAAE;AAAEC,eAAO,EAAE;AAAX,OAJT;AAKE,cAAQ,EAAE,KAAKf,cALjB;AAME,UAAI,EAAC;AANP,MADF,EASE;AAAO,aAAO,EAAE,KAAKrF,KAAL,CAAWmG;AAA3B,OACE,uBAAC,0BAAD;AAAY,aAAO,EAAC,UAApB;AAA+B,eAAS,EAAC;AAAzC,mBADF,CATF,CAfJ,CANF,CADF;AAyCD,GAjFH;;AAAA;AAAA,EAAqCnF,kBAArC;AAAaiE,+B,CACJoB,Y,GAA8C;AACnDP,eAAa,EAAEd,cAAc,CAACgB;AADqB,C;;;;;;;;;;;;;;;;ACxCvD;AACA;AAEA;AAWO,IAAMM,cAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA,SASEC,cATF,GASE,8BAAwF;AAAA,QAAvEC,KAAuE,QAAvEA,KAAuE;AAAA,QAAhEC,OAAgE,QAAhEA,OAAgE;AAAA,QAAvDC,OAAuD,QAAvDA,OAAuD;AAAA,QAA9CC,qBAA8C,QAA9CA,qBAA8C;;AACtFJ,kFAAc,CAACC,KAAD,EAAQC,OAAR,EAAiBC,OAAjB,EAA0BC,qBAA1B,CAAd;AACD,GAXH;;AAAA,SAaEpG,yBAbF,GAaE,mCAA0BC,SAA1B,EAA0D;AACxD,QAAI,CAACC,uEAAa,CAAC,KAAKT,KAAN,EAAaQ,SAAb,EAAwB,CAAC,UAAD,CAAxB,CAAlB,EAAyD;AACvD,WAAK+F,cAAL,CAAoB/F,SAApB;AACD;AACF,GAjBH;;AAAA,SAmBEE,iBAnBF,GAmBE,6BAAoB;AAClB,SAAK6F,cAAL,CAAoB,KAAKvG,KAAzB;AACD,GArBH;;AAAA,SAuBEW,MAvBF,GAuBE,kBAAc;AAAA,QACJE,QADI,GACS,KAAKb,KADd,CACJa,QADI;AAEZ,WAAOA,QAAQ,GAAGA,QAAQ,EAAX,GAAgB,IAA/B;AACD,GA1BH;;AAAA;AAAA,EAAoCG,+CAApC;AAAasF,c,CAEJD,Y,GAA6C;AAClDM,uBAAqB,EAAE;AACrBC,aAAS,EAAE,IADU;AAErBC,aAAS,EAAE;AAFU;AAD2B,C;;;;;;;;ACjBtD;AAAA;AAAA;AAEO,IAAMC,UAAU,GAAG5F,iEAAM,CAACC,GAAV;AAAA;AAAA;AAAA,2DAAhB,C;;;;;;;;ACFP;AAAA;AAAA;AAUA;AAUO,SAASoF,cAAT,CACLC,KADK,EAELC,OAFK,EAGLC,OAHK,EAILK,OAJK,EAKL;AACA,MAAI,CAACP,KAAD,IAAU,CAACC,OAAf,EAAwB;AACtB;AACD;;AAEDA,SAAO,CAACO,UAAR,CAAmB,IAAnB,EAAyBC,SAAzB,CAAmC,CAAnC,EAAsC,CAAtC,EAAyCR,OAAO,CAAC1E,KAAjD,EAAwD0E,OAAO,CAACS,MAAhE;;AALA,8BAO0BV,KAAK,CAACW,OAAN,CAAcC,qBAAd,EAP1B;AAAA,MAOQrF,KAPR,yBAOQA,KAPR;AAAA,MAOemF,MAPf,yBAOeA,MAPf;;AASA,MAAI,CAACnF,KAAD,IAAU,CAACmF,MAAf,EAAuB;AACrB;AACD;;AAEDT,SAAO,CAAC1E,KAAR,GAAgBA,KAAhB;AACA0E,SAAO,CAACS,MAAR,GAAiBA,MAAjB;AAdA,2BAgBiEH,OAhBjE,CAgBQM,SAhBR;AAAA,MAgBQA,SAhBR,mCAgBoB,IAhBpB;AAAA,2BAgBiEN,OAhBjE,CAgB0BH,SAhB1B;AAAA,MAgB0BA,SAhB1B,mCAgBsC,IAhBtC;AAAA,2BAgBiEG,OAhBjE,CAgB4CF,SAhB5C;AAAA,MAgB4CA,SAhB5C,mCAgBwD,IAhBxD;;AAkBA,MAAI,CAACH,OAAD,IAAY,CAACA,OAAO,CAACY,MAAzB,EAAiC;AAC/B;AACD;;AAED,MAAMC,cAAc,GAAGb,OAAO,CAC3BvI,GADoB,CAChB,UAAAqJ,GAAG;AAAA,WACNA,GAAG,YAAYC,uDAAf,GACID,GADJ,GAEIE,iEAAa,CAACF,GAAD,EAAMf,OAAN,CAHX;AAAA,GADa,CAAvB;AAOA,MAAMkB,UAAU,GAAGJ,cAAc,CAC9BK,MADgB,CACT,UAAAJ,GAAG;AAAA,WAAIA,GAAG,YAAYK,2DAAf,IAAkCL,GAAG,YAAYC,uDAAjD,IAAiED,GAAD,CAAaM,SAAjF;AAAA,GADM,EAEhB3J,GAFgB,CAEZ,UAACqJ,GAAD;AAAA,WACFA,GAAG,YAAYC,uDAAf,IAA8BD,GAAG,YAAYK,2DAA9C,GACIL,GADJ,GAEIA,GAAG,CAACM,SAHL;AAAA,GAFY,CAAnB;AAQA,MAAMC,qBAAqB,GAAG;AAC5BnB,aAAS,EAATA,SAD4B;AAE5BoB,aAAS,EAAE,KAFiB;AAG5BC,YAAQ,EAAE;AAHkB,GAA9B;AAMA,MAAMC,aAAa,GAAGX,cAAc,CACjCK,MADmB,CACZ,UAAAJ,GAAG;AAAA,WAAIA,GAAG,YAAYW,2DAAf,IAAmCX,GAAD,CAAaY,SAAnD;AAAA,GADS,EAEnBjK,GAFmB,CAEf,UAACqJ,GAAD;AAAA,WACHA,GAAG,YAAYW,2DAAf,GACIX,GADJ,GAEIA,GAAG,CAACY,SAHL;AAAA,GAFe,CAAtB;AAQA,MAAMC,eAAe,GAAGd,cAAc,CACnCK,MADqB,CACd,UAAAJ,GAAG;AAAA,WAAKA,GAAD,CAAaM,SAAb,IAA2BN,GAAD,CAAac,WAA3C;AAAA,GADW,EAErBnK,GAFqB,CAGpB;AAAA,QAAG2J,SAAH,QAAGA,SAAH;AAAA,QAAcQ,WAAd,QAAcA,WAAd;AAAA,WACG;AAAEnF,cAAQ,EAAE2E,SAAS,CAACS,GAAtB;AAA2BD,iBAAW,EAAXA;AAA3B,KADH;AAAA,GAHoB,CAAxB;AAQA,MAAME,oBAAoB,GAAG;AAC3B3B,aAAS,EAATA,SAD2B;AAE3B4B,SAAK,EAAE,OAFoB;AAG3BC,aAAS,EAAE;AAHgB,GAA7B;;AAMA,MAAIrB,SAAJ,EAAe;AACbsB,6DAAA,CAAsBlC,OAAtB,EAA+BkB,UAA/B,EAA2CI,qBAA3C;AACD;;AACDY,2DAAA,CAAsBlC,OAAtB,EAA+ByB,aAA/B,EAA8CM,oBAA9C;AACAG,iEAAA,CAA4BlC,OAA5B,EAAqC4B,eAArC;AACD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/FM,SAAS5H,aAAT,CAAuBmI,IAAvB,EAAkCC,IAAlC,EAA6CC,WAA7C,EAAyE;AAAA,MAA5BA,WAA4B;AAA5BA,eAA4B,GAAJ,EAAI;AAAA;;AAC9E,MAAMC,cAAc,GAAG,IAAIC,GAAJ,CAAQF,WAAR,CAAvB;AAEA,MAAMG,OAAO,GAAG,IAAID,GAAJ,CACdlI,MAAM,CAACoI,IAAP,CAAYN,IAAZ,EACG3J,MADH,CACU6B,MAAM,CAACoI,IAAP,CAAYL,IAAZ,CADV,EAEGjB,MAFH,CAEU,UAAAuB,GAAG;AAAA,WAAI,CAACJ,cAAc,CAACK,GAAf,CAAmBD,GAAnB,CAAL;AAAA,GAFb,CADc,CAAhB;AAMA,SAAOE,KAAK,CAACC,IAAN,CAAWL,OAAO,CAACM,MAAR,EAAX,EACJ3B,MADI,CACG,UAAAuB,GAAG;AAAA,WAAIP,IAAI,CAACO,GAAD,CAAJ,KAAcN,IAAI,CAACM,GAAD,CAAtB;AAAA,GADN,EAEJ7B,MAFI,KAEO,CAFd;AAGD,C;;;;;;;;;;;;;;;;;;;;ACZD;AAEA;;SAWekC,mB;;;;;;;yEAAf,iBAAmCxJ,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACOA,KAAK,CAACwG,KADb;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAK+BmC,gDAAA,CAAac,iBAAb,CAA+BC,eAA/B,CAA+C1J,KAAK,CAACwG,KAAN,CAAYW,OAA3D,CAL/B;;AAAA;AAKQe,yBALR;AAAA,6CAOS;AACLA,2BAAa,EAAbA;AADK,aAPT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAYO,IAAMyB,mBAAmB,GAC9B9J,0FAAkB,CAAqD2J,mBAArD,CADb,C;;;;;;;;;;;;;;;;;;;;ACzBP;AAEA;;SAaeI,W;;;;;;;yEAAf,iBAA2B5J,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA,gBAEOA,KAAK,CAACwG,KAFb;AAAA;AAAA;AAAA;;AAAA,6CAGW,IAHX;;AAAA;AAAA;AAAA,mBAO0BmC,0DAAA,CAAuB3I,KAAK,CAACwG,KAAN,CAAYW,OAAnC,EAA4CnH,KAAK,CAAC6J,gBAAlD,CAP1B;;AAAA;AAAA;AAAA;AAOIC,4BAPJ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAWO,IAAMC,WAAW,GACtBlK,0FAAkB,CAAqC+J,WAArC,CADb,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzBP;AAEA;;SAaeI,U;;;;;;;yEAAf,kBAA0BhK,KAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAEIN,kCAFJ,GAQMM,KARN,CAEIN,sBAFJ,EAGIC,aAHJ,GAQMK,KARN,CAGIL,aAHJ,EAIIF,wBAJJ,GAQMO,KARN,CAIIP,wBAJJ,EAKIwK,oBALJ,GAQMjK,KARN,CAKIiK,oBALJ,EAMIC,uBANJ,GAQMlK,KARN,CAMIkK,uBANJ,EAOIC,qBAPJ,GAQMnK,KARN,CAOImK,qBAPJ;;AAUQC,gBAVR;AAAA;AAAA;AAAA;AAAA;AAAA,qFAUe,iBAAOC,GAAP,EAAgC/L,GAAhC;AAAA;AAAA;AAAA;AAAA;AAAA,8BACPA,GAAG,IAAI,CAAC+L,GAAG,CAACC,QADL;AAAA;AAAA;AAAA;;AAAA;AAAA,+BAEHD,GAAG,CAACD,IAAJ,CAAS9L,GAAT,CAFG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAVf;;AAAA,8BAUQ8L,IAVR;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAgBQG,OAAO,CAACC,GAAR,CAAY,CAChBJ,IAAI,CAACzB,gDAAA,CAAa8B,gBAAd,EAAgChL,wBAAhC,CADY,EAEhB2K,IAAI,CAACzB,gDAAA,CAAa+B,cAAd,EAA8BhL,sBAA9B,CAFY,EAGhB0K,IAAI,CAACzB,gDAAA,CAAagC,KAAd,EAAqBhL,aAArB,CAHY,EAIhByK,IAAI,CAACzB,gDAAA,CAAac,iBAAd,EAAiCQ,oBAAjC,CAJY,EAKhBG,IAAI,CAACzB,gDAAA,CAAaiC,kBAAd,EAAkCV,uBAAlC,CALY,EAMhBE,IAAI,CAACzB,gDAAA,CAAakC,iBAAd,EAAiCV,qBAAjC,CANY,CAAZ,CAhBR;;AAAA;AAAA,8CAyBS,EAzBT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AA4BO,IAAMW,UAAU,GAAGjL,0FAAkB,CAAmCmK,UAAnC,CAArC,C;;;;;;;;AC5CP;AAAA;AAAA;;;;;;;;;;;;;ACEO,IAAMe,YAAb;AAAA;AAAA;AAGE,wBAAY5D,OAAZ,EAAoC;AAClC,SAAK6D,QAAL,GAAgB7D,OAAhB;AACD;;AALH;AAAA;AAAA,wBAOsC;AAClC,aAAO,KAAK6D,QAAZ;AACD;AATH;;AAAA;AAAA,I;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFA;AAEA;AAUO,IAAMC,iCAAb;AAAA;AAAA;AAAA;;AAKE,4BAAYjL,KAAZ,EAA0C;AAAA;;AACxC,wCAAMA,KAAN;AADwC,UAF1CsK,QAE0C,GAFtB,KAEsB;AAGxC,UAAKY,aAAL,GAAqB,MAAKA,aAAL,CAAmB7K,IAAnB,wCAArB;AACA,UAAK8K,UAAL,GAAkB,MAAKA,UAAL,CAAgB9K,IAAhB,wCAAlB;AACA,UAAK+K,WAAL,GAAmB,MAAKA,WAAL,CAAiB/K,IAAjB,wCAAnB;AACA,UAAKqE,QAAL,GAAgB,MAAKA,QAAL,CAAcrE,IAAd,wCAAhB;AANwC;AAOzC;;AAZH;;AAAA,SAcEqE,QAdF,GAcE,oBAAW;AAAA,QACD2G,GADC,GAC0B,IAD1B,CACDA,GADC;AAAA,QACI5E,OADJ,GAC0B,IAD1B,CACIA,OADJ;AAAA,QACa6D,QADb,GAC0B,IAD1B,CACaA,QADb;;AAGT,QAAIe,GAAG,IAAI5E,OAAP,IAAkB6D,QAAtB,EAAgC;AAC9B,WAAK7D,OAAL,CAAaS,MAAb,GAAsB,KAAKmE,GAAL,CAASnE,MAA/B;AACA,WAAKT,OAAL,CAAa1E,KAAb,GAAqB,KAAKsJ,GAAL,CAAStJ,KAA9B;AACA,WAAK/B,KAAL,CAAWsL,QAAX,CAAoB;AAAED,WAAG,EAAE,IAAIN,iCAAJ,CAAiBM,GAAjB,CAAP;AAA8B5E,eAAO,EAAPA;AAA9B,OAApB;AACD;AACF,GAtBH;;AAAA,SAwBEyE,aAxBF,GAwBE,yBAAgB;AACd,SAAKZ,QAAL,GAAgB,IAAhB;AACA,SAAK5F,QAAL;AACD,GA3BH;;AAAA,SA6BEyG,UA7BF,GA6BE,oBAAWI,EAAX,EAAiC;AAC/B,SAAKF,GAAL,GAAWE,EAAX;AACA,SAAK7G,QAAL;AACD,GAhCH;;AAAA,SAkCE0G,WAlCF,GAkCE,qBAAYG,EAAZ,EAAmC;AACjC,SAAK9E,OAAL,GAAe8E,EAAf;AACA,SAAK7G,QAAL;AACD,GArCH;;AAAA,SAuCE8G,qBAvCF,GAuCE,+BAAsBhL,SAAtB,EAAwD;AACtD,WAAOA,SAAS,CAAC0E,QAAV,KAAuB,KAAKlF,KAAL,CAAWkF,QAAzC;AACD,GAzCH;;AAAA,SA2CEuG,kBA3CF,GA2CE,8BAAqB;AACnB,SAAK/G,QAAL;AACD,GA7CH;;AAAA,SA+CEhE,iBA/CF,GA+CE,6BAAoB;AAClB,SAAKgE,QAAL;AACD,GAjDH;;AAAA,SAmDS/D,MAnDT,GAmDE,kBAAgB;AACd,WACE;AAAK,WAAK,EAAEG,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB;AAAEoC,gBAAQ,EAAE;AAAZ,OAAlB,EAA4C,KAAKnD,KAAL,CAAW0L,cAAvD;AAAZ,OACE;AACE,SAAG,EAAE,KAAK1L,KAAL,CAAWkF,QADlB;AAEE,SAAG,EAAE,KAAKiG,UAFZ;AAGE,WAAK,EAAErK,MAAM,CAACC,MAAP,CAAc;AAAEgB,aAAK,EAAE;AAAT,OAAd,EAAiC,KAAK/B,KAAL,CAAW+F,UAA5C,CAHT;AAIE,YAAM,EAAE,KAAKmF;AAJf,MADF,EAOE;AACE,WAAK,EAAEpK,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB;AAAEoC,gBAAQ,EAAE,UAAZ;AAAwBC,WAAG,EAAE,CAA7B;AAAgCC,YAAI,EAAE;AAAtC,OAAlB,EAA6D,KAAKrD,KAAL,CAAW2L,WAAxE,CADT;AAEE,SAAG,EAAE,KAAKP;AAFZ,MAPF,CADF;AAcD,GAlEH;;AAAA;AAAA,EAAsCpK,kBAAtC,E;;ACZA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AAEA;;SAWe4K,sB;;;;;;;6BAAf,iBAAsC5L,KAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACOA,KAAK,CAAC6L,MAAN,CAAaC,KAAb,CAAmB,UAAAtF,KAAK;AAAA,qBAAI,CAAC,CAACA,KAAN;AAAA,aAAxB,CADP;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAKgC+D,OAAO,CAACC,GAAR,CAC5BxK,KAAK,CAAC6L,MAAN,CAAa1N,GAAb,CAAiB,UAAAqI,KAAK;AAAA,qBACpBmC,WAAA,CAAaiC,kBAAb,CAAgCmB,qBAAhC,CAAsDvF,KAAK,CAACW,OAA5D,CADoB;AAAA,aAAtB,CAD4B,CALhC;;AAAA;AAKQ6E,2BALR;AAAA,6CAWS;AACLA,6BAAe,EAAfA;AADK,aAXT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAgBO,IAAMC,sBAAsB,GACjCpM,wDAAkB,CAA2D+L,sBAA3D,CADb,C;;;;;;;;;;;AC7BP;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFA;AACA;CAGA;AACA;;AACA,IAAM/J,KAAK,GAAGqK,+EAAc,CAAC;AAC3BC,SAAO,EAAE;AACPC,WAAO,EAAE;AACPC,WAAK,EAAEC,oEAAI,CAAC,GAAD,CADJ;AAEPC,UAAI,EAAED,oEAAI,CAAC,GAAD,CAFH;AAGPE,UAAI,EAAEF,oEAAI,CAAC,GAAD;AAHH;AADF,GADkB;AAQ3BtK,eAAa,EAAE;AARY,CAAD,CAA5B;;AAWA,SAASyK,iBAAT,GAA6B;AAC3B,SAAO;AACL5K,SAAK,EAALA,KADK;AAEL;AACA0C,iBAAa,EAAE,IAAImI,GAAJ,EAHV;AAIL;AACAC,kBAAc,EAAE,IAAIC,kDAAJ,EALX;AAML;AACAC,qBAAiB,EAAEC,wFAAuB;AAPrC,GAAP;AASD;;AAEc,SAAS7I,cAAT,GAA0B;AACvC;AACA;AACA,MAAI,CAAC8I,OAAO,CAACC,OAAb,EAAsB;AACpB,WAAOP,iBAAiB,EAAxB;AACD,GALsC,CAOvC;;;AACA,MAAI,CAACQ,MAAM,CAACC,oBAAZ,EAAkC;AAChCD,UAAM,CAACC,oBAAP,GAA8BT,iBAAiB,EAA/C;AACD;;AAED,SAAOQ,MAAM,CAACC,oBAAd;AACD,C;;;;;;;;AC1CD,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;;ACAA;AAAA;AAAA;AAEO,IAAMC,SAAS,GAAGjM,iEAAM,CAACC,GAAV;AAAA;AAAA;AAAA,wBAAf,C","file":"2-19214a3b81da43b144b5.js","sourcesContent":["export * from './components'\nexport * from './displayResults'\nexport * from './facc'\nexport * from './hoc'\nexport * from './MediaElement'\nexport * from './shallowEquals'\nexport * from './types'\n","import { withPrefix } from 'gatsby-link';\n\nexport const DOCS_URI = withPrefix('/docs/globals.html')\n\nexport const EXAMPLE_IMAGES = [1, 2, 3, 4, 5]\n  .map(idx => `bbt${idx}.jpg`)\n  .map(label => ({\n    label,\n    url: withPrefix(`/images/${label}`)\n  }))\n\nexport const EXAMPLE_IMAGES_FACE_EXPRESSIONS = [\n  'happy',\n  'sad',\n  'angry',\n  'disgusted',\n  'surprised',\n  'fearful',\n  'neutral'\n]\n  .map(expression => `${expression}.jpg`)\n  .map(label => ({\n    label,\n    url: withPrefix(`/images/${label}`)\n  }))\n\nexport const ALIGNED_FACE_IMAGES_BY_CLASS = ['amy', 'bernadette', 'howard', 'leonard', 'penny', 'raj', 'sheldon', 'stuart']\n  .map(\n    clazz => [1, 2, 3, 4, 5]\n      .map(idx => `${clazz}${idx}.png`)\n      .map(label => ({\n        label,\n        url: withPrefix(`/images/${clazz}/${label}`)\n      }))\n  )\n\nexport const EXAMPLE_VIDEO = withPrefix(`/media/bbt.mp4`)\n\nexport const MODELS_URI = withPrefix(`/models`)\n\nexport const ALIGNED_FACE_IMAGES = ALIGNED_FACE_IMAGES_BY_CLASS\n  .reduce((flat, arr) => flat.concat(arr), [])\n\nexport const FACE_DETECTORS = ['Tiny Face Detector', 'SSD Mobilenet V1', 'MTCNN']\n\nexport function isTinyFaceDetector(detectorName: string) {\n  return detectorName === FACE_DETECTORS[0]\n}\n\nexport function isSsdMobilenetv1(detectorName: string) {\n  return detectorName === FACE_DETECTORS[1]\n}\n\nexport function isMtcnn(detectorName: string) {\n  return detectorName === FACE_DETECTORS[2]\n}\n\nexport function getFaceDetectionModelUri(detectorName: string, modelUri: string) {\n  if (isTinyFaceDetector(detectorName)) {\n    return { tinyFaceDetectorModelUrl: modelUri }\n  }\n  if (isSsdMobilenetv1(detectorName)) {\n    return { ssdMobilenetv1ModelUrl: modelUri }\n  }\n  if (isMtcnn(detectorName)) {\n    return { mtcnnModelUrl: modelUri }\n  }\n\n  throw new Error(`getLoadModelsUriFromFaceDetector - invalid face detector: ${detectorName}`)\n}","import * as React from 'react';\n\nimport { shallowEquals } from '../shallowEquals';\nimport { ReactElement } from '../types';\n\nexport interface IsBusy  {\n  isBusy: boolean\n}\n\nexport interface WithAsyncRenderingProps<T extends IsBusy> {\n  children: (injectedProps: T) => ReactElement\n  renderBusyComponent?: () => ReactElement\n}\n\nexport interface WithAsyncRenderingState<InjectedProps> extends IsBusy {\n  injectedProps: InjectedProps | null\n}\n\nexport const withAsyncRendering = <Props, InjectedProps> (\n  asyncAction: (props: Props) => Promise<InjectedProps | null>,\n  initialState?: InjectedProps\n) => {\n\n  type ExtendedComponentProps = Props & WithAsyncRenderingProps<InjectedProps & IsBusy>\n\n  return class extends React.Component<\n    Props & WithAsyncRenderingProps<InjectedProps & IsBusy>\n  > {\n    constructor(props: ExtendedComponentProps) {\n      super(props)\n      this.dispatchAsyncAction = this.dispatchAsyncAction.bind(this)\n    }\n\n    state: WithAsyncRenderingState<InjectedProps> = {\n      injectedProps: initialState,\n      isBusy: true\n    }\n\n    async dispatchAsyncAction(props: Props) {\n      this.setState({ isBusy: true })\n      this.setState({ isBusy: false, injectedProps: await asyncAction(props) })\n    }\n\n    componentWillReceiveProps(nextProps: ExtendedComponentProps) {\n      if (!shallowEquals(this.props, nextProps, ['children'])) {\n        this.dispatchAsyncAction(nextProps)\n      }\n    }\n\n    componentDidMount() {\n      this.dispatchAsyncAction(this.props as any as Props)\n    }\n\n    render() {\n      const { injectedProps, isBusy } = this.state\n      const { renderBusyComponent } = this.props\n\n      if (isBusy) {\n        return renderBusyComponent ? renderBusyComponent() : null\n      }\n\n      return injectedProps\n        ? this.props.children(Object.assign({}, injectedProps, { isBusy }))\n        // case: async action did not resolve state\n        : null\n    }\n  }\n}\n","import styled from 'styled-components';\n\nexport type CenterContentProps = {\n  alignItems?: string,\n  flexDirection?: 'row' | 'column'\n}\n\nexport const CenterContent = styled.div`\n  display: flex;\n  align-items: ${(props: CenterContentProps) => props.alignItems || 'center'};\n  justify-content: center;\n  flex-direction: ${(props: CenterContentProps) => props.flexDirection || 'row'};\n  flex-wrap: wrap;\n`","import Link from 'gatsby-link';\nimport styled, { css } from 'styled-components';\n\nconst linkCss = css`\n  padding: 4px;\n  color: inherit;\n  text-decoration: none;\n  display: block;\n`\n\nexport const StyledLink = styled(Link)`\n  ${linkCss}\n`\n\nexport const StyledAbsLink = styled.a`\n  ${linkCss}\n`","import { Divider, Drawer, Hidden, IconButton, List, ListItem } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport * as React from 'react';\n\nimport { DOCS_URI } from '../const';\nimport { StyledAbsLink, StyledLink } from '../styled/StyledLink';\n\nexport type MenuItem = {\n  label: string\n  linkTo: string\n}\n\ntype SideMenuProps = {\n  items: MenuItem[]\n  isOpen: boolean\n  classes: any\n  onToggle: () => any\n}\n\nconst styles = (theme: any) => ({\n  paper: {\n    width: theme.sideMenuWidth\n  }\n})\n\nclass SideMenuComponent extends React.Component<SideMenuProps> {\n  renderDrawer(isSm: boolean) {\n    const menu = (\n      <div>\n        {\n          isSm &&\n            <IconButton\n              aria-label=\"open drawer\"\n              onClick={this.props.onToggle}\n            >\n              <MenuIcon />\n            </IconButton>\n        }\n        <StyledAbsLink href=\"https://github.com/justadudewhohacks/face-api.js\">\n          <h3 style={{ paddingLeft: 24 }}> face-api.js </h3>\n        </StyledAbsLink>\n        <Divider />\n        <StyledAbsLink href={DOCS_URI}>\n          <h3 style={{ paddingLeft: 24 }}> API Documentation </h3>\n        </StyledAbsLink>\n        <Divider />\n        <List>\n          {\n            this.props.items.map(\n              item =>\n                <ListItem key={item.linkTo}>\n                  <StyledLink to={item.linkTo}>\n                    { item.label }\n                  </StyledLink>\n                </ListItem>\n            )\n          }\n        </List>\n      </div>\n    )\n\n    return (\n      <Drawer\n        anchor=\"left\"\n        variant={isSm ? 'temporary' : 'permanent'}\n        open={this.props.isOpen}\n        onClose={isSm ? this.props.onToggle : () => {}}\n        ModalProps={{\n          keepMounted: true\n        }}\n        classes={{\n          paper: this.props.classes.paper\n        }}\n      >\n        { menu }\n      </Drawer>\n    )\n  }\n\n  render() {\n    return (\n      <div>\n        <Hidden mdUp>\n          { this.renderDrawer(true) }\n        </Hidden>\n        <Hidden smDown>\n          { this.renderDrawer(false) }\n        </Hidden>\n      </div>\n    )\n  }\n}\n\nexport const SideMenu = withStyles(styles)(SideMenuComponent)","import { IconButton } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport * as React from 'react';\nimport styled from 'styled-components';\n\nimport { CenterContent } from '../styled/CenterContent';\nimport { SideMenu } from '../components/SideMenu';\n\nconst PageHeader = styled.h3`\n  text-align: center;\n`\n\nconst MENU_ITEMS = [\n  { label: 'Face And Landmark Detection', linkTo: '/face_and_landmark_detection' },\n  { label: 'Face Expression Recognition', linkTo: '/face_expression_recognition' },\n  { label: 'Face Recognition', linkTo: '/face_recognition' },\n  { label: 'Video Face Tracking', linkTo: '/video_face_tracking' },\n  { label: 'Webcam Face Tracking', linkTo: '/webcam_face_tracking' },\n  { label: 'Webcam Face Expression Recognition', linkTo: '/webcam_face_expression_recognition' },\n  { label: 'BBT Face Landmark Detection', linkTo: '/bbt_face_landmark_detection' },\n  { label: 'BBT Face Similarity', linkTo: '/bbt_face_similarity' },\n  { label: 'BBT Face Recognition', linkTo: '/bbt_face_recognition' }\n]\n\nconst styles = (theme: any) => ({\n  pageContent: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    maxWidth: '800px',\n    padding: '10px',\n    marginLeft: '0px',\n    [theme.breakpoints.up('md')]: {\n      marginLeft: theme.sideMenuWidth\n    }\n  }\n})\n\ntype PageLayoutProps = {\n  classes: any\n}\n\ntype PageLayoutState = {\n  isSideMenuOpen: boolean\n}\n\nclass PageLayoutComponent extends React.Component<PageLayoutProps, PageLayoutState> {\n  state: PageLayoutState = {\n    isSideMenuOpen: false\n  }\n\n  toggleMenu = () => {\n    this.setState(state => ({ isSideMenuOpen: !state.isSideMenuOpen }))\n  }\n\n  public render() {\n    return (\n      <div>\n        <IconButton\n          aria-label=\"open drawer\"\n          onClick={this.toggleMenu}\n          style={{ zIndex: 999 }}\n        >\n          <MenuIcon />\n        </IconButton>\n        <SideMenu\n          items={MENU_ITEMS}\n          isOpen={this.state.isSideMenuOpen}\n          onToggle={this.toggleMenu}\n        />\n        <div className={this.props.classes.pageContent}>\n          <CenterContent>\n            <div>\n              <PageHeader>\n                face-api.js playground\n              </PageHeader>\n              { this.props.children }\n              </div>\n          </CenterContent>\n        </div>\n      </div>\n    )\n  }\n\n}\n\nexport const PageLayout = withStyles(styles as any)(PageLayoutComponent)","import { MuiThemeProvider } from '@material-ui/core';\r\nimport * as React from 'react';\r\n\r\nimport { PageLayout } from './layouts/PageLayout';\r\n\r\nconst getPageContext = require('./getPageContext').default\r\n\r\nexport class Root extends React.Component {\r\n\r\n  pageContext: any = {}\r\n\r\n  constructor(props: any, context: any){\r\n    super(props, context)\r\n    this.pageContext = getPageContext()\r\n  }\r\n\r\n  public render() {\r\n    return(\r\n      <MuiThemeProvider\r\n        theme={this.pageContext.theme}\r\n        sheetsManager={this.pageContext.sheetsManager}\r\n      >\r\n        <PageLayout>\r\n          { this.props.children }\r\n        </PageLayout>\r\n      </MuiThemeProvider>\r\n    )\r\n  }\r\n}","import { FormControl, FormHelperText, Input, MenuItem, Select } from '@material-ui/core';\nimport * as React from 'react';\n\nexport type ImageSelectionItem = {\n  url: string\n  label: string\n}\n\ntype ImageSelectionProps = {\n  items: ImageSelectionItem[]\n  selectedImage: string\n  onChange: (value: string) => void\n}\n\nexport const ImageSelection = ({ items, selectedImage, onChange }: ImageSelectionProps) =>\n  <FormControl>\n    <Select\n      value={selectedImage}\n      onChange={e => onChange(e.target.value)}\n      input={<Input />}\n    >\n      {\n        items.map(item =>\n          <MenuItem\n            key={item.url}\n            value={item.url}\n          >\n            { item.label }\n          </MenuItem>\n        )\n      }\n    </Select>\n    <FormHelperText>Pick an image</FormHelperText>\n  </FormControl>","import * as Mui from '@material-ui/core';\nimport { MediaElement } from 'face-api.js-react';\nimport * as React from 'react';\nimport styled from 'styled-components';\n\nimport { ImageWithOverlay } from '../../face-api.js-react';\nimport { SideBySide } from '../styled/SideBySide';\nimport { ImageSelection, ImageSelectionItem } from './ImageSelection';\n\nconst Container = styled.div`\n  padding: 10px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`\n\nconst Margin = styled.div`\n  margin: 10px;\n`\n\n\nexport enum SelectionTypes {\n  SELECT = 'SELECT',\n  FILE = 'FILE',\n  BOTH = 'BOTH'\n}\n\nexport type SelectableImageProps = {\n  onLoaded: (refs: { img: MediaElement, overlay: HTMLCanvasElement}) => any\n  imgId: string\n  items?: ImageSelectionItem[]\n  initialImageSrc?: string\n  selectionType?: SelectionTypes\n  imageStyle?: React.CSSProperties\n}\n\nexport type SelectableImageState = {\n  imageSrc: string\n}\n\nexport class SelectableImage extends React.Component<SelectableImageProps, SelectableImageState> {\n  static defaultProps: Partial<SelectableImageProps> = {\n    selectionType: SelectionTypes.SELECT\n  }\n\n  constructor(props: SelectableImageProps) {\n    super(props)\n\n    this.state = {\n      imageSrc: props.initialImageSrc\n    }\n\n    this.onChangeSelection = this.onChangeSelection.bind(this)\n    this.onLoadFromDisk = this.onLoadFromDisk.bind(this)\n  }\n\n  onChangeSelection(imageSrc: string) {\n    this.setState({\n      imageSrc\n    })\n  }\n\n  onLoadFromDisk(e: any) {\n    const file = (e.target.files || [])[0]\n    if (!file) {\n      return\n    }\n\n    const reader = new FileReader()\n\n    reader.onload = (loadEvent: any) =>\n    this.setState({\n      imageSrc: loadEvent.target.result\n    })\n\n    reader.readAsDataURL(e.target.files[0])\n  }\n\n  render() {\n    const { selectionType } = this.props\n    return (\n      <Container>\n        <ImageWithOverlay\n          {...this.props}\n          imageSrc={this.state.imageSrc}\n          imageStyle={this.props.imageStyle}\n        />\n        <SideBySide>\n        {\n          (selectionType === SelectionTypes.SELECT || selectionType === SelectionTypes.BOTH)\n            &&\n            <Margin>\n              <ImageSelection\n                items={this.props.items}\n                selectedImage={this.state.imageSrc}\n                onChange={this.onChangeSelection}\n              />\n            </Margin>\n        }\n        {\n          (selectionType === SelectionTypes.FILE || selectionType === SelectionTypes.BOTH)\n            &&\n            <Margin>\n              <input\n                accept=\"image/*\"\n                id={this.props.imgId}\n                multiple\n                style={{ display: 'none' }}\n                onChange={this.onLoadFromDisk}\n                type=\"file\"\n              />\n              <label htmlFor={this.props.imgId}>\n                <Mui.Button variant=\"outlined\" component=\"span\">\n                  From Disk\n                </Mui.Button>\n              </label>\n            </Margin>\n        }\n        </SideBySide>\n      </Container>\n    )\n  }\n}","import { BoxWithText, FaceDetection, FaceLandmarks68, WithFaceLandmarks, WithFaceDetection } from 'face-api.js';\nimport { MediaElement, shallowEquals } from 'face-api.js-react';\nimport * as React from 'react';\n\nimport { displayResults, DisplayResultsOptions } from '../displayResults';\nimport { ReactElement } from '../types';\n\nexport type DisplayResultsProps = {\n  input: MediaElement\n  overlay: HTMLCanvasElement\n  results?: Array<FaceDetection | FaceLandmarks68 | WithFaceLandmarks<WithFaceDetection<{}>> | BoxWithText>\n  displayResultsOptions?: DisplayResultsOptions\n  children?: () => ReactElement\n}\n\nexport class DisplayResults extends React.Component<DisplayResultsProps> {\n\n  static defaultProps: Partial<DisplayResultsProps> = {\n    displayResultsOptions: {\n      withScore: true,\n      drawLines: true\n    }\n  }\n\n  displayResults({ input, overlay, results, displayResultsOptions }: DisplayResultsProps) {\n    displayResults(input, overlay, results, displayResultsOptions)\n  }\n\n  componentWillReceiveProps(nextProps: DisplayResultsProps) {\n    if (!shallowEquals(this.props, nextProps, ['children'])) {\n      this.displayResults(nextProps)\n    }\n  }\n\n  componentDidMount() {\n    this.displayResults(this.props)\n  }\n\n  render(): any {\n    const { children } = this.props\n    return children ? children() : null\n  }\n}","import styled from 'styled-components';\n\nexport const SideBySide = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`","import {\n  BoxWithText,\n  FaceDetection,\n  FaceLandmarks68,\n  ObjectDetection,\n  resizeResults,\n  WithFaceDetection,\n  WithFaceExpressions,\n  WithFaceLandmarks,\n} from 'face-api.js';\nimport * as faceapi from 'face-api.js';\n\nimport { MediaElement } from './MediaElement';\n\nexport type DisplayResultsOptions = {\n  withBoxes?: boolean\n  withScore?: boolean\n  drawLines?: boolean\n}\n\nexport function displayResults(\n  input: MediaElement,\n  overlay: HTMLCanvasElement,\n  results: Array<FaceDetection | FaceLandmarks68 | BoxWithText | WithFaceLandmarks<WithFaceDetection<{}>> | WithFaceExpressions<WithFaceDetection<{}>>>,\n  options: DisplayResultsOptions\n) {\n  if (!input || !overlay) {\n    return\n  }\n\n  overlay.getContext('2d').clearRect(0, 0, overlay.width, overlay.height)\n\n  const { width, height } = input.element.getBoundingClientRect()\n\n  if (!width || !height) {\n    return\n  }\n\n  overlay.width = width\n  overlay.height = height\n\n  const { withBoxes = true, withScore = true, drawLines = true } = options\n\n  if (!results || !results.length) {\n    return\n  }\n\n  const resizedResults = results\n    .map(res =>\n      res instanceof BoxWithText\n        ? res\n        : resizeResults(res, overlay)\n    )\n\n  const detections = resizedResults\n    .filter(res => res instanceof ObjectDetection || res instanceof BoxWithText || (res as any).detection)\n    .map((res: ObjectDetection | WithFaceLandmarks<WithFaceDetection<{}>> | BoxWithText) =>\n      (res instanceof BoxWithText || res instanceof ObjectDetection)\n        ? res\n        : res.detection\n    )\n\n  const drawDetectionsOptions = {\n    withScore,\n    textColor: 'red',\n    fontSize: 16\n  }\n\n  const faceLandmarks = resizedResults\n    .filter(res => res instanceof FaceLandmarks68 || (res as any).landmarks)\n    .map((res: FaceLandmarks68 | WithFaceLandmarks<WithFaceDetection<{}>>) =>\n      res instanceof FaceLandmarks68\n        ? res\n        : res.landmarks\n    )\n\n  const faceExpressions = resizedResults\n    .filter(res => (res as any).detection && (res as any).expressions)\n    .map(\n      ({ detection, expressions }: WithFaceExpressions<WithFaceDetection<{}>>) =>\n        ({ position: detection.box, expressions })\n    )\n\n\n  const drawLandmarksOptions = {\n    drawLines,\n    color: 'green',\n    lineWidth: 2\n  }\n\n  if (withBoxes) {\n    faceapi.drawDetection(overlay, detections, drawDetectionsOptions)\n  }\n  faceapi.drawLandmarks(overlay, faceLandmarks, drawLandmarksOptions)\n  faceapi.drawFaceExpressions(overlay, faceExpressions)\n}","export function shallowEquals(obj1: any, obj2: any, excludeKeys: string[] = []) {\n  const excludeKeysSet = new Set(excludeKeys)\n\n  const keysSet = new Set(\n    Object.keys(obj1)\n      .concat(Object.keys(obj2))\n      .filter(key => !excludeKeysSet.has(key))\n  )\n\n  return Array.from(keysSet.values())\n    .filter(key => obj1[key] !== obj2[key])\n    .length === 0\n}","import * as faceapi from 'face-api.js';\nimport { FaceLandmarks68 } from 'face-api.js';\nimport { withAsyncRendering } from '../hoc/withAsyncRendering';\nimport { MediaElement } from '../MediaElement';\n\nexport interface DetectFaceLandmarksProps {\n  input?: MediaElement\n}\n\nexport interface DetectFaceLandmarksState {\n  faceLandmarks?: FaceLandmarks68\n}\n\nasync function detectFaceLandmarks(props: DetectFaceLandmarksProps) {\n  if (!props.input) {\n    return\n  }\n\n  const faceLandmarks = (await faceapi.nets.faceLandmark68Net.detectLandmarks(props.input.element)) as FaceLandmarks68\n\n  return {\n    faceLandmarks\n  }\n}\n\nexport const DetectFaceLandmarks =\n  withAsyncRendering<DetectFaceLandmarksProps, DetectFaceLandmarksState>(detectFaceLandmarks)\n","import * as faceapi from 'face-api.js';\n\nimport { withAsyncRendering } from '../hoc/withAsyncRendering';\nimport { MediaElement } from '../MediaElement';\nimport { FaceDetectionOptions, FaceDetection } from 'face-api.js';\n\nexport interface DetectFacesProps {\n  detectionOptions: FaceDetectionOptions\n  input?: MediaElement\n}\n\nexport interface DetectFacesState {\n  faceDetections?: FaceDetection[]\n}\n\nasync function detectFaces(props: DetectFacesProps) {\n\n  if (!props.input) {\n    return null\n  }\n\n  return {\n    faceDetections: await faceapi.detectAllFaces(props.input.element, props.detectionOptions)\n  }\n}\n\nexport const DetectFaces =\n  withAsyncRendering<DetectFacesProps, DetectFacesState>(detectFaces)\n","import { NeuralNetwork } from 'face-api.js';\nimport * as faceapi from 'face-api.js';\n\nimport { withAsyncRendering } from '../hoc/withAsyncRendering';\n\nexport interface LoadModelsProps {\n  ssdMobilenetv1ModelUrl?: string\n  tinyFaceDetectorModelUrl?: string\n  mtcnnModelUrl?: string\n  faceLandmarkModelUrl?: string\n  faceRecognitionModelUrl?: string\n  faceExpessionModelUrl?: string\n}\n\nexport interface LoadModelsState {}\n\nasync function loadModels(props: LoadModelsProps) {\n  const {\n    ssdMobilenetv1ModelUrl,\n    mtcnnModelUrl,\n    tinyFaceDetectorModelUrl,\n    faceLandmarkModelUrl,\n    faceRecognitionModelUrl,\n    faceExpessionModelUrl\n  } = props\n\n  const load = async (net: NeuralNetwork<any>, url?: string) => {\n    if (url && !net.isLoaded) {\n      await net.load(url)\n    }\n  }\n\n  await Promise.all([\n    load(faceapi.nets.tinyFaceDetector, tinyFaceDetectorModelUrl),\n    load(faceapi.nets.ssdMobilenetv1, ssdMobilenetv1ModelUrl),\n    load(faceapi.nets.mtcnn, mtcnnModelUrl),\n    load(faceapi.nets.faceLandmark68Net, faceLandmarkModelUrl),\n    load(faceapi.nets.faceRecognitionNet, faceRecognitionModelUrl),\n    load(faceapi.nets.faceExpressionNet, faceExpessionModelUrl)\n  ])\n\n  return {}\n}\n\nexport const LoadModels = withAsyncRendering<LoadModelsProps, LoadModelsState>(loadModels)","export * from './withAsyncRendering'","import { TMediaElement } from 'face-api.js';\n\nexport class MediaElement {\n  private _element: TMediaElement\n\n  constructor(element: TMediaElement) {\n    this._element = element\n  }\n\n  public get element(): TMediaElement {\n    return this._element\n  }\n}","import * as React from 'react';\n\nimport { MediaElement } from '../';\n\nexport type ImageWithOverlayProps = {\n  imageSrc: string\n  onLoaded: (refs: { img: MediaElement, overlay: HTMLCanvasElement}) => any\n  containerStyle?: React.CSSProperties\n  imageStyle?: React.CSSProperties\n  canvasStyle?: React.CSSProperties\n}\n\nexport class ImageWithOverlay extends React.Component<ImageWithOverlayProps> {\n  img: HTMLImageElement | undefined\n  overlay: HTMLCanvasElement | undefined\n  isLoaded: boolean = false\n\n  constructor(props: ImageWithOverlayProps) {\n    super(props)\n\n    this.onImageLoaded = this.onImageLoaded.bind(this)\n    this.onImageRef = this.onImageRef.bind(this)\n    this.onCanvasRef = this.onCanvasRef.bind(this)\n    this.onChange = this.onChange.bind(this)\n  }\n\n  onChange() {\n    const { img, overlay, isLoaded } = this\n\n    if (img && overlay && isLoaded) {\n      this.overlay.height = this.img.height\n      this.overlay.width = this.img.width\n      this.props.onLoaded({ img: new MediaElement(img), overlay })\n    }\n  }\n\n  onImageLoaded() {\n    this.isLoaded = true\n    this.onChange()\n  }\n\n  onImageRef(el: HTMLImageElement) {\n    this.img = el\n    this.onChange()\n  }\n\n  onCanvasRef(el: HTMLCanvasElement) {\n    this.overlay = el\n    this.onChange()\n  }\n\n  shouldComponentUpdate(nextProps: ImageWithOverlayProps) {\n    return nextProps.imageSrc !== this.props.imageSrc\n  }\n\n  componentDidUpdate() {\n    this.onChange()\n  }\n\n  componentDidMount() {\n    this.onChange()\n  }\n\n  public render() {\n    return(\n      <div style={Object.assign({}, { position: 'relative' }, this.props.containerStyle)}>\n        <img\n          src={this.props.imageSrc}\n          ref={this.onImageRef}\n          style={Object.assign({ width: '100%' }, this.props.imageStyle)}\n          onLoad={this.onImageLoaded}\n        />\n        <canvas\n          style={Object.assign({}, { position: 'absolute', top: 0, left: 0 }, this.props.canvasStyle)}\n          ref={this.onCanvasRef}\n        />\n      </div>\n    )\n  }\n}","export * from './DisplayResults'\nexport * from './ImageWithOverlay'","import * as faceapi from 'face-api.js';\n\nimport { withAsyncRendering } from '../hoc/withAsyncRendering';\nimport { MediaElement } from '../MediaElement';\n\nexport interface ComputeFaceDescriptorsProps {\n  inputs: Array<MediaElement | undefined>\n}\n\nexport interface ComputeFaceDescriptorsState {\n  faceDescriptors?: Float32Array[]\n}\n\nasync function computeFaceDescriptors(props: ComputeFaceDescriptorsProps) {\n  if (!props.inputs.every(input => !!input)) {\n    return\n  }\n\n  const faceDescriptors = await Promise.all(\n    props.inputs.map(input =>\n      faceapi.nets.faceRecognitionNet.computeFaceDescriptor(input.element) as Promise<Float32Array>\n    )\n  )\n\n  return {\n    faceDescriptors\n  }\n}\n\nexport const ComputeFaceDescriptors =\n  withAsyncRendering<ComputeFaceDescriptorsProps, ComputeFaceDescriptorsState>(computeFaceDescriptors)\n\n","export * from './ComputeFaceDescriptors'\nexport * from './DetectFaceLandmarks'\nexport * from './DetectFaces'\nexport * from './LoadModels'","import { SheetsRegistry } from 'jss';\nimport { createMuiTheme, createGenerateClassName } from '@material-ui/core/styles';\nimport cyan from '@material-ui/core/colors/cyan';\n\n// A theme with custom primary and secondary color.\n// It's optional.\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      light: cyan[300],\n      main: cyan[500],\n      dark: cyan[700]\n    }\n  },\n  sideMenuWidth: '240px'\n});\n\nfunction createPageContext() {\n  return {\n    theme,\n    // This is needed in order to deduplicate the injection of CSS in the page.\n    sheetsManager: new Map(),\n    // This is needed in order to inject the critical CSS.\n    sheetsRegistry: new SheetsRegistry(),\n    // The standard class name generator.\n    generateClassName: createGenerateClassName(),\n  };\n}\n\nexport default function getPageContext() {\n  // Make sure to create a new context for every server-side request so that data\n  // isn't shared between connections (which would be bad).\n  if (!process.browser) {\n    return createPageContext();\n  }\n\n  // Reuse context on the client-side.\n  if (!global.__INIT_MATERIAL_UI__) {\n    global.__INIT_MATERIAL_UI__ = createPageContext();\n  }\n\n  return global.__INIT_MATERIAL_UI__;\n}","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","import styled from 'styled-components';\n\nexport const MarginTop = styled.div`\n  margin-top: 10px;\n`"],"sourceRoot":""}